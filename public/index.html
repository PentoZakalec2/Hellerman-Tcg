<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hellerman TCG</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="top-nav-bar">
        <div class="nav-group">
            <button class="nav-btn" onclick="toggleCasinoMenu()">üé∞ KASYNO</button>
            <button class="nav-btn" onclick="openFriendsPanel()">üë• ZNAJOMI</button>
            <button class="nav-btn disabled" title="Wkr√≥tce...">üèÜ RANKING</button>
        </div>
    </div>
    <div id="welcome-screen" style="display: flex;">
        <div class="welcome-content">
            <h1 class="hero-title">HELLERMAN TCG</h1>
            <p class="hero-subtitle">Sta≈Ñ do walki i zbierz unikalne karty!</p>
            
            <div class="hero-buttons">
                <button class="hero-btn login" onclick="window.location.href='login.html'">ZALOGUJ SIƒò</button>
                <button class="hero-btn register" onclick="window.location.href='register.html'">REJESTRACJA</button>
            </div>
        </div>
    </div>

    <div id="casino-backdrop" onclick="toggleCasinoMenu()"></div>

    <div id="casino-dropdown">
        <div class="close-casino-btn" onclick="toggleCasinoMenu()">‚úï</div>

        <div class="casino-header-text">WYBIERZ GRƒò</div>

        <div class="casino-options-wrapper">
            <div class="casino-option" onclick="window.location.href='ruletka.html'">
                <div class="casino-icon">üé°</div>
                <div class="casino-label">RULETKA</div>
                <div class="casino-desc">Obstawiaj w czasie rzeczywistym!</div>
            </div>

            <div class="casino-option disabled">
                <div class="casino-icon">üÉè</div>
                <div class="casino-label">BLACKJACK</div>
                <div class="comming-soon">WKR√ìTCE</div>
            </div>

            <div class="casino-option disabled">
                <div class="casino-icon">ü™ô</div>
                <div class="casino-label">COIN FLIP</div>
                <div class="comming-soon">WKR√ìTCE</div>
            </div>
        </div>
    </div>

    <div id="wallet-container">
        <div class="wallet-item">
            <img src="coin_icon.png" alt="HC">
            <span id="coin-amount">0.00</span>
        </div>
        
        <div class="wallet-item">
            <img src="shard_icon.png" alt="Shards">
            <div id="shard-display">
                <span class="s-common">0</span>/
                <span class="s-rare">0</span>/
                <span class="s-epic">0</span>/
                <span class="s-legendary">0</span>/
                <span class="s-secret">0</span>
            </div>
        </div>
    </div>

    <div id="ui-container" style="display:none;">
        
        <div class="ui-group">
            <div id="profile-btn" onclick="window.location.href='login.html'"></div>
            <div id="username-display" class="label-text">Zaloguj siƒô</div>
        </div>
        
        <div id="inventory-wrapper" class="ui-group" style="display:none;">
            <div id="inventory-btn" onclick="openInventory()"></div>
            <div class="label-text">Torba</div>
        </div>

        <div id="deckbuilder-wrapper" class="ui-group" style="display:none;">
            <div id="deck-btn" onclick="openDeckBuilder()"></div>
            <div class="label-text">Talie</div>
        </div>

        <div id="shop-wrapper" class="ui-group" style="display:none;">
            <div id="shop-btn" onclick="openShop()"></div>
            <div class="label-text">Sklep</div>
        </div>

        <div id="market-wrapper" class="ui-group" style="display:none;">
            <div id="market-btn" onclick="openMarket()"></div>
            <div class="label-text">Rynek</div>
        </div>

        <div id="collection-wrapper" class="ui-group" style="display:none;"> <div id="collection-btn" onclick="openCollection()"></div>
            <div class="label-text">Kolekcja</div>
        </div>

        <div id="play-wrapper" class="ui-group" style="display:none;"> <div id="play-btn" onclick="window.location.href='/play'"></div>
            <div class="label-text" style="color:#ff416c;">WALCZ</div>
        </div>
    </div>

    <div id="game-scene">
        
        <h1 id="status-text" style="position: absolute; top: 15%; width: 100%; text-align: center; z-index: 40; text-shadow: 0 0 10px black; font-size: 32px; pointer-events: none;">Wczytywanie...</h1>

        <div id="pack-stack-container"></div>
        <div id="active-pack-container"></div>

        <div id="booster-section" style="display:none;">
            <div id="glow-bg"></div>
            <div id="booster-wrapper">
                <img src="booster.png" alt="Booster Pack" id="booster-img">
            </div>
        </div>

        <div id="confetti-container"></div>
        <div id="card-stack"></div>
        
        <div id="limit-message" style="display:none;">
            <h2>Wr√≥ƒá jutro!</h2>
            <p>Wykorzysta≈Çe≈õ dzienny limit paczek.</p>
        </div>
    </div>

    <div id="inventory-panel">
        <div class="inv-header">
            <div class="header-left">
                <h2>Twoja Torba</h2>
                <select id="inventory-sort" onchange="sortInventory()">
                    <option value="rarity">Sortuj: Rzadko≈õƒá (Domy≈õlne)</option>
                    <option value="id">Sortuj: ID</option>
                    <option value="atk">Sortuj: Atak</option>
                    <option value="def">Sortuj: Obrona</option>
                    <option value="qty">Sortuj: Ilo≈õƒá (Od najwiƒôcej)</option>
                </select>
            </div>
            <div class="close-btn" onclick="closeInventory()">‚úï</div>
        </div>
        <div class="inv-tabs">
            <div class="inv-tab active" onclick="switchInvTab('cards')">KARTY</div>
            <div class="inv-tab" onclick="switchInvTab('packs')">PACZKI</div>
        </div>
        <div class="inv-grid" id="inv-grid"></div>
    </div>

    <div id="deck-builder-panel">
        <div class="inv-header">
            <h2>Edytor Talii</h2>
            <div class="close-btn" onclick="closeDeckBuilder()">‚úï</div>
        </div>
        <div class="db-container">
            <div class="db-section db-left">
                <h3>Twoje Talie</h3>
                <div id="deck-slots-list"></div>
                <button id="save-deck-btn" onclick="saveCurrentDeck()">ZAPISZ TALIƒò</button>
            </div>
            <div class="db-section db-center" id="drop-zone-deck">
                <h3>Aktualna Talia <input type="text" id="deck-name-input" value="Nowa Talia"></h3>
                <div class="db-card-list" id="current-deck-grid"></div>
                <div class="db-counter" id="deck-counter">0 / 18</div>
            </div>
            <div class="db-section db-right" id="drop-zone-collection">
                <h3>Dostƒôpne Karty</h3>
                <div class="db-card-list" id="collection-grid"></div>
                <div class="db-counter" id="collection-counter">0 / 0</div>
            </div>
        </div>
    </div>

    <div id="market-panel">
        <div class="inv-header">
            <h2>Rynek Kart</h2>
            <div class="close-btn" onclick="closeMarket()">‚úï</div>
        </div>
        <div class="market-filters">
            <input type="text" id="filter-name" placeholder="Szukaj nazwy..." oninput="filterMarket()">
            <select id="filter-rarity" onchange="filterMarket()">
                <option value="">Wszystkie rzadko≈õci</option>
                <option value="Common">Common</option>
                <option value="Rare">Rare</option>
                <option value="Epic">Epic</option>
                <option value="Legendary">Legendary</option>
                <option value="Secret">Secret</option>
            </select>
        </div>

        <div class="market-content" id="market-list">
            <p style="text-align:center; color:gray; margin-top:20px;">≈Åadowanie ofert...</p>
        </div>
    </div>
    <div id="friends-panel">
        <div class="friends-header">
            <h2>STREFA SPO≈ÅECZNO≈öCI</h2>
            <div class="close-btn" onclick="closeFriendsPanel()">‚úï</div>
        </div>

        <div class="friends-content-wrapper">
            <div class="friends-left-col">
                <div class="friends-tabs">
                    <button class="f-tab active" onclick="switchFriendTab('list')">MOI ZNAJOMI</button>
                    <button class="f-tab" onclick="switchFriendTab('search')">SZUKAJ ZNAJOMYCH</button>
                </div>

                <div id="friend-tab-list" class="f-tab-content" style="display:block;">
                    <div id="friend-requests-container"></div> <div class="f-list-header">TWOI ZNAJOMI</div>
                    <div id="friends-list-container">≈Åadowanie...</div>
                </div>

                <div id="friend-tab-search" class="f-tab-content" style="display:none;">
                    <div class="search-bar-row">
                        <input type="text" id="friend-search-input" placeholder="Wpisz nick gracza...">
                        <button class="action-btn purple small" onclick="searchUsers()">ZNAJD≈π</button>
                    </div>
                    <div id="search-results-container"></div>
                </div>
            </div>

            <div class="friends-right-col">
                <div class="privacy-box">
                    <h3>TWOJE USTAWIENIA PRYWATNO≈öCI</h3>
                    <p style="font-size:12px; color:#aaa; margin-bottom:10px;">Zaznacz, co mogƒÖ widzieƒá Twoi znajomi:</p>
                    <label class="privacy-row">
                        <input type="checkbox" id="priv-inv" onchange="updatePrivacy()"> 
                        Publiczny Ekwipunek (Wszystkie karty)
                    </label>
                    <label class="privacy-row">
                        <input type="checkbox" id="priv-coll" onchange="updatePrivacy()"> 
                        Publiczna Kolekcja (Ksiƒôga)
                    </label>
                    <label class="privacy-row">
                        <input type="checkbox" id="priv-deck" onchange="updatePrivacy()"> 
                        Publiczne Talie
                    </label>
                </div>

                <div id="friend-preview-area" style="display:none;">
                    <h3 id="preview-friend-name" style="color:gold;">NICK</h3>
                    <div class="friend-actions">
                        <button class="action-btn gold small" onclick="viewFriendData('collection')">ZOBACZ KOLEKCJƒò</button>
                        <button class="action-btn purple small" onclick="viewFriendData('inventory')">ZOBACZ TORBƒò</button>
                        <button class="action-btn blue small" onclick="viewFriendData('deck')">ZOBACZ TALIƒò</button>
                        <button class="action-btn red small" onclick="removeFriend()">USU≈É</button>
                    </div>
                    <div id="friend-data-display">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <div id="shop-panel">
        <div class="inv-header">
            <h2>Sklep Hellermana</h2>
            <div class="close-btn" onclick="closeShop()">‚úï</div>
        </div>
        <div class="shop-content">
            <div class="shop-section-title">Darmowe Nagrody</div>
            <div class="daily-container">
                <div class="daily-box today" id="daily-today">
                    <h3>DZI≈ö</h3>
                    <div class="reward-icon" id="daily-icon-today">?</div>
                    <div class="reward-val" id="daily-val-today">...</div>
                    <button class="shop-buy-btn" id="daily-claim-btn" onclick="claimDaily()">ODBIERZ</button>
                </div>
                <div class="daily-box tomorrow">
                    <h3>JUTRO...</h3>
                    <div class="reward-icon" id="daily-icon-tom">?</div>
                    <div class="reward-val" id="daily-val-tom">...</div>
                    <div class="lock-overlay">üîí</div>
                </div>
            </div>

            <div class="shop-section-title">Oferty za Monety</div>
            <div class="shop-grid">
                <div class="shop-item">
                    <img src="booster.png" class="shop-item-img">
                    <div class="shop-item-name">Karze≈Ç Pack</div>
                    <div class="shop-item-price price-coin">100 HC</div>
                    <button class="shop-buy-btn" onclick="buyItem('coin_pack', 100, 'coins')">KUP</button>
                </div>
            </div>

            <div class="shop-section-title">Przetwarzanie Shard√≥w</div>
            <div class="shop-grid">
                <div class="shop-item">
                    <img src="booster.png" class="shop-item-img">
                    <div class="shop-item-name">Common Transmute</div>
                    <div class="shop-item-price price-shard">10 Common</div>
                    <button class="shop-buy-btn" onclick="buyItem('shard_common_pack', 10, 'shard_common')">WYMIE≈É</button>
                </div>
                <div class="shop-item">
                    <img src="booster.png" class="shop-item-img">
                    <div class="shop-item-name">Rare Transmute</div>
                    <div class="shop-item-price price-shard-rare">4 Rare</div>
                    <button class="shop-buy-btn" onclick="buyItem('shard_rare_pack', 4, 'shard_rare')">WYMIE≈É</button>
                </div>
            </div>
        </div>
    </div>

    <div id="admin-panel">
        <div id="admin-toggle-btn" onclick="toggleAdminPanel()">‚û§</div>

        <h3>Testowanie Paczek</h3>
        <label><input type="checkbox" id="admin-unlimited"> Nielimitowane paczki</label>
        <button class="admin-action-btn" style="background: #e67e22; margin-top: 10px; margin-bottom: 15px;" onclick="adminResetDaily()">
            ‚ü≥ ZRESETUJ M√ìJ LICZNIK (0/5)
        </button>
        <label>Ilo≈õƒá kart:</label> 
        <input type="number" id="admin-count" value="5" min="1" max="50">
        
        <label>Rzadko≈õƒá:</label> 
        <select id="admin-rarity">
            <option value="Random">Losowa</option>
            <option value="Common">Common</option>
            <option value="Rare">Rare</option>
            <option value="Epic">Epic</option>
            <option value="Legendary">Legendary</option>
        </select>
        
        <hr style="border-color: #555; margin: 10px 0;">
        
        <label><input type="checkbox" id="admin-force-numbered" onchange="toggleAdminTierSelect()"> Wymu≈õ NumerowanƒÖ</label>
        
        <div id="admin-tier-wrapper" style="display:none; margin-top:5px;">
            <label>Wybierz Tier (Nak≈Çad):</label>
            <select id="admin-force-tier">
                <option value="Random">Losowy z karty</option>
                <option value="50">1/50 (Emerald)</option>
                <option value="25">1/25 (Gold)</option>
                <option value="10">1/10 (Pink)</option>
                <option value="5">1/5 (Blue)</option>
                <option value="1">1/1 (Red)</option>
            </select>
        </div>

        <button class="admin-action-btn" onclick="adminOpenPack()" style="margin-top:15px;">OTW√ìRZ PACZKƒò</button>
        

        <hr style="border-color: #555; margin: 15px 0;">

        <h3>Dodaj Zasoby</h3>
        <label>Gracz (Login):</label>
        <input type="text" id="admin-target-user" placeholder="Login gracza">
        
        <label>Zas√≥b:</label>
        <select id="admin-resource-type">
            <option value="coins">Hellerman Coins</option>
            <option value="shard_common">Shard Common</option>
            <option value="shard_rare">Shard Rare</option>
            <option value="shard_epic">Shard Epic</option>
            <option value="shard_legendary">Shard Legendary</option>
            <option value="shard_secret">Shard Secret</option>
        </select>
        
        <label>Ilo≈õƒá:</label>
        <input type="number" id="admin-resource-amount" value="100">
        
        <button class="admin-action-btn green" onclick="adminAddResources()">DODAJ</button>
    </div>

    <div id="card-preview-modal">
        <div class="preview-content">
            <div id="preview-card-container"></div>
            
            <div id="smash-controls">
                <label style="color:#ddd; font-size:14px;">Ile duplikat√≥w wymieniƒá?</label>
                <div class="smash-row">
                    <input type="number" id="smash-amount" value="1" min="1">
                    <span class="max-text" id="smash-max-text">/ 5</span>
                </div>
                <button class="action-btn purple" onclick="confirmSmash()">POTWIERD≈π</button>
            </div>

            <div class="preview-actions">
                <button id="smash-btn" class="action-btn purple">WYMIE≈É NA SHARDY</button>
                <button class="action-btn gray" title="Otwiera modal sprzeda≈ºy">WYSTAW NA RYNKU</button>
                <button class="action-btn red" onclick="closePreview()">ZAMKNIJ</button>
            </div>
            <div id="preview-msg"></div>
        </div>
    </div>

    <div id="buy-modal" style="display:none;" class="modal-overlay">
        <div class="modal-box">
            <h3>Kupujesz: <span id="buy-name"></span></h3>
            <p>Cena: <span id="buy-price"></span></p>
            <input type="number" id="buy-amount" value="1" min="1" style="font-size:20px; padding:5px; width:80px; text-align:center;">
            <div style="margin-top:20px; display:flex; gap:10px; justify-content: center;">
                <button class="action-btn purple" onclick="confirmBuy()">POTWIERD≈π</button>
                <button class="action-btn red" onclick="closeBuyModal()">ANULUJ</button>
            </div>
        </div>
    </div>

    <div id="sell-modal" class="modal-overlay" style="display:none;">
        <div class="modal-box">
            <h3>Wystaw na Sprzeda≈º</h3>
            <p id="sell-card-name" style="color:gold; font-weight:bold;"></p>
            
            <label>Ilo≈õƒá:</label>
            <div class="smash-row" style="justify-content:center; margin-bottom:10px;">
                <input type="number" id="sell-amount" value="1" min="1" style="width:60px; text-align:center;">
                <span class="max-text" id="sell-max-text">/ 1</span>
            </div>

            <label>Cena za sztukƒô (HC):</label>
            <input type="number" id="sell-price" value="100" min="1" step="10" style="width:100px; text-align:center; font-size:20px; color:gold; background:#333; border:1px solid gold; padding:5px;">

            <div style="margin-top:20px; display:flex; gap:10px; justify-content:center;">
                <button class="action-btn purple" onclick="confirmSell()">WYSTAW</button>
                <button class="action-btn red" onclick="closeSellModal()">ANULUJ</button>
            </div>
        </div>
    </div>

    <div id="help-modal">
        <div class="help-content">
            <div class="help-header">
                <h2>Centrum Pomocy</h2>
                <div class="close-btn" onclick="closeHelpMenu()">‚úï</div>
            </div>
            
            <div id="help-menu-main">
                <button class="help-option-btn blue" onclick="showDropRates()">Procentowe Szanse</button>
                <button class="help-option-btn red" onclick="showReportForm()">Zg≈Ço≈õ Problem</button>
                <button class="help-option-btn gold" onclick="showSuggestForm()">Zasugeruj Kartƒô</button>
                <button id="admin-reports-btn" class="help-option-btn purple" style="display:none;" onclick="showAdminReports()">Przejrzyj Zg≈Çoszenia (Admin)</button>
            </div>

            <div id="help-section-rates" class="help-section" style="display:none;">
                <h3>Szanse na trafienie</h3>
                <ul id="rates-list">≈Åadowanie...</ul>
                <button class="back-btn" onclick="backToHelpMain()">Powr√≥t</button>
            </div>

            <div id="help-section-report" class="help-section" style="display:none;">
                <h3>Zg≈Ço≈õ Problem</h3>
                <input type="text" id="rep-nick" placeholder="Tw√≥j Nick" class="help-input">
                <input type="email" id="rep-email" placeholder="Tw√≥j Email" class="help-input">
                <input type="text" id="rep-subject" placeholder="Temat zg≈Çoszenia" class="help-input">
                <textarea id="rep-desc" placeholder="Opis problemu..." class="help-input area"></textarea>
                <button class="action-btn red" onclick="submitProblem()">WY≈öLIJ</button>
                <button class="back-btn" onclick="backToHelpMain()">Powr√≥t</button>
            </div>

            <div id="help-section-suggest" class="help-section" style="display:none;">
                <h3>Zasugeruj Kartƒô</h3>
                <input type="text" id="sug-nick" placeholder="Tw√≥j Nick" class="help-input">
                <input type="text" id="sug-name" placeholder="Nazwa Postaci" class="help-input">
                <select id="sug-rarity" class="help-input">
                    <option value="Common">Common</option><option value="Rare">Rare</option>
                    <option value="Epic">Epic</option><option value="Legendary">Legendary</option><option value="Secret">Secret</option>
                </select>
                <select id="sug-type" class="help-input">
                    <option value="W zwarciu">W zwarciu</option><option value="Dystansowy">Dystansowy</option><option value="Specjalna">Specjalna</option>
                </select>
                <input type="text" id="sug-stats" placeholder="Statystyki (np. 10 ATK / 5 DEF)" class="help-input">
                <input type="text" id="sug-img" placeholder="Link do obrazka (opcjonalne)" class="help-input">
                <textarea id="sug-desc" placeholder="Opis karty / Umiejƒôtno≈õci..." class="help-input area"></textarea>
                <button class="action-btn gold" onclick="submitSuggestion()">WY≈öLIJ POMYS≈Å</button>
                <button class="back-btn" onclick="backToHelpMain()">Powr√≥t</button>
            </div>

            <div id="help-section-admin" class="help-section" style="display:none;">
                <h3>Zg≈Çoszenia Graczy</h3>
                <div id="admin-reports-list"></div>
                <button class="back-btn" onclick="backToHelpMain()">Powr√≥t</button>
            </div>
        </div>
    </div>

    <div id="collection-panel">
    <div class="inv-header">
    <div class="header-left">
        <h2>Ksiƒôga Kolekcji</h2>
        <select id="collection-sort" onchange="sortCollection()">
            <option value="id">Sortuj: ID (Domy≈õlne)</option>
            <option value="rarity">Sortuj: Rzadko≈õƒá</option>
            <option value="atk">Sortuj: Atak (ATK)</option>
            <option value="def">Sortuj: Obrona (DEF)</option>
            <option value="name">Sortuj: Nazwa (A-Z)</option>
        </select>
    </div>
    <div class="close-btn" onclick="closeCollection()">‚úï</div>
</div>
    
    <div class="collection-content">
        <div id="main-collection-grid"></div>
    </div>

    <div id="collection-stats">
        <span id="collection-total">0 / 0</span>
        <div id="collection-tooltip"></div>
    </div>
</div>
<div id="custom-alert" class="modal-overlay" style="display:none; z-index: 10000;">
    <div class="modal-box" style="border-color: #9b59b6;">
        <h3 style="color: #9b59b6; margin-bottom: 15px;">KOMUNIKAT</h3>
        <p id="custom-alert-msg" style="font-size: 18px; color: white;">...</p>
        <button class="action-btn purple" style="margin-top: 20px;" onclick="document.getElementById('custom-alert').style.display='none'">OK</button>
    </div>
</div>
    
    <div id="help-btn" onclick="openHelpMenu()">?</div>

    <script src="script.js"></script>
    <script src="script-inventory.js"></script> 
    <script src="script-shop.js"></script>
    <script src="script-help.js"></script>
    <script src="script-market.js"></script>
    <script src="script-collection.js"></script>
    <script src="script-friends.js"></script>
</body>
</html>